# 30-DB 스택 명세서 (Stack Specification)

## 1. 개요 (Overview)
이 스택은 데이터베이스(RDS, Aurora)가 배치될 **DB Subnet Group**을 생성합니다. 실제 데이터베이스 인스턴스(`60-db`)와 네트워크 정의를 분리하여, DB 인스턴스의 변경이나 재생성이 네트워크 그룹 설정에 영향을 주지 않도록 합니다.

---

## 2. 아키텍처 및 구성 (Architecture & Configuration)

### A. 리소스 구성
- **DB Subnet Group**: `00-network`에서 정의된 `db` 티어 서브넷들을 묶어 RDS가 사용할 수 있는 논리적 그룹으로 만듭니다.

### B. 주요 파라미터 (Variables)
| 변수명 | 설정값 (Dev) | 설명 |
|:---|:---|:---|
| `db_subnet_group_name` | `"{project}-{env}-db-sg"` | 서브넷 그룹 이름. |

---

## 3. 구현 의도 및 디자인 의사결정 (Design Rationale)

### A. 네트워크와 컴퓨팅(데이터)의 수명주기 분리
**설정:**
- `60-db`가 아닌 별도 스택(`30-db`)으로 분리.

**의도 (Rationale):**
RDS 인스턴스는 스냅샷 복구, 엔진 업그레이드, 클래스 변경 등으로 인해 교체(Replacement)가 빈번하게 발생할 수 있습니다.
- 반면, **DB Subnet Group**은 VPC 내에서 IP 주소 할당을 관장하는 정적인 리소스입니다.
- 이 둘을 분리함으로써, 실수로 `60-db`를 Destroy 하더라도 서브넷 그룹 정의는 남아있어 재생성이 빠르고, 타 스택(예: Peering)에서의 참조가 깨지는 것을 방지합니다.
