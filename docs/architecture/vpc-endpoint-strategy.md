# 아키텍처: VPC 엔드포인트 전략 (PrivateLink)

## 개요
제로 트러스트(Zero Trust) 및 폐쇄망 보안 모델에 따라, 데이터베이스와 같은 민감한 워크로드는 NAT Gateway를 사용하지 않습니다. 이러한 격리된 인스턴스가 AWS 서비스(SSM, S3 등)와 통신할 수 있도록 **VPC 엔드포인트(AWS PrivateLink)**를 활용합니다.

## 전략
- **기반 인프라 통합**: VPC 엔드포인트는 핵심 인프라로 간주되어 `00-network` 스택 단계에서 프로비저닝됩니다.
- **연결 방식**: 대부분의 서비스에는 인터페이스 엔드포인트를 사용하고, S3/DynamoDB에는 게이트웨이 엔드포인트를 사용합니다.

## 관리용 필수 엔드포인트
폐쇄망 내에서 **키리스 관리(SSM)**를 활성화하기 위해 다음 엔드포인트가 필수적입니다:
1. **ssm**: 표준 Systems Manager API.
2. **ssmmessages**: 세션 매니저(터미널 접속)용.
3. **ec2messages**: SSM 에이전트 통신 및 기타 관리 기능용.

## 보안 정렬
- **인터넷 경로 제거**: 트래픽이 AWS 백본 내에만 머물며, NAT Gateway나 IGW가 필요하지 않습니다.
- **IAM 통제**: 네트워크 기반의 SSH 키가 아닌 IAM 정책을 통해 인스턴스 접근을 제어합니다.
- **엔드포인트 정책**: 보안 그룹 및 엔드포인트 정책을 통해 허용된 VPC CIDR에서만 트래픽을 허용합니다.

## 구현 세부사항
- **식별**: Private DNS를 활성화하여 표준 AWS 서비스 URL(예: `ssm.ap-northeast-2.amazonaws.com`)이 VPC 내의 프라이빗 엔드포인트 IP로 자동 확인되도록 합니다.
