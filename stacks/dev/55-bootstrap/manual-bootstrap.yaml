apiVersion: v1
kind: Secret
metadata:
  name: repo-creds
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: repository
type: Opaque
stringData:
  type: git
  url: git@github.com:ytkcore/meta-iac-x4.git
  sshPrivateKey: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
    QyNTUxOQAAACD5FyAYrMwbAzgpdx1CnxEsrwSv/jtw/AyplUyYvvjVtwAAAJhjbApJY2wK
    SQAAAAtzc2gtZWQyNTUxOQAAACD5FyAYrMwbAzgpdx1CnxEsrwSv/jtw/AyplUyYvvjVtw
    AAAEBJMNRO3ldWb6uW089UtSrRJn9YSFok22JMaL3jkliU1vkXIBiszBsDOCl3HUKfESyv
    BK/+O3D8DKmVTJi++NW3AAAAEXl0a2NvcmVAZ21haWwuY29tAQIDBA==
    -----END OPENSSH PRIVATE KEY-----
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: root-apps
  namespace: argocd
  finalizers:
  - resources-finalizer.argocd.argoproj.io
  labels:
    app.kubernetes.io/managed-by: manual
    app.kubernetes.io/part-of: gitops
spec:
  destination:
    namespace: argocd
    server: https://kubernetes.default.svc
  project: default
  source:
    path: gitops-apps/bootstrap
    repoURL: git@github.com:ytkcore/meta-iac-x4.git
    targetRevision: main
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
